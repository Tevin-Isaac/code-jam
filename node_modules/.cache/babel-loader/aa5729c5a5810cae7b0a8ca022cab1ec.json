{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pipeToFuture = exports.toFuture = exports.Future = void 0; // A Future is like an exernally fulfillable (resolvable) promise\n\nvar Future =\n/** @class */\nfunction () {\n  function Future() {\n    var _this = this;\n\n    this._finished = false;\n    this._error = null;\n    this.promise = new Promise(function (resolve, reject) {\n      _this._resolve = resolve;\n      _this._reject = reject;\n    });\n  }\n\n  Object.defineProperty(Future.prototype, \"finished\", {\n    get: function () {\n      return this._finished;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Future.prototype, \"error\", {\n    get: function () {\n      return this._error;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Future.prototype.resolve = function (value) {\n    this._finished = true;\n    this._error = null;\n\n    this._resolve(value);\n  };\n\n  Future.prototype.reject = function (error) {\n    this._finished = true;\n    this._error = error;\n\n    this._reject(error);\n  };\n\n  Future.prototype.wait = function () {\n    return this.promise;\n  };\n\n  Future.prototype.asPromise = function () {\n    return this.promise;\n  };\n\n  return Future;\n}();\n\nexports.Future = Future;\n\nfunction toFuture(p) {\n  var future = new Future();\n  return pipeToFuture(p, future);\n}\n\nexports.toFuture = toFuture;\n\nfunction pipeToFuture(p, future) {\n  p.then(future.resolve.bind(future)).catch(future.reject.bind(future));\n  return future;\n}\n\nexports.pipeToFuture = pipeToFuture;","map":{"version":3,"sources":["../src/future.ts"],"names":[],"mappings":";;;;;mEAAA;;AACA,IAAA,MAAA;AAAA;AAAA,YAAA;EAOE,SAAA,MAAA,GAAA;IAAA,IAAA,KAAA,GAAA,IAAA;;IALQ,KAAA,SAAA,GAAY,KAAZ;IACA,KAAA,MAAA,GAAc,IAAd;IAKN,KAAK,OAAL,GAAe,IAAI,OAAJ,CAAe,UAAC,OAAD,EAAU,MAAV,EAAgB;MAC5C,KAAI,CAAC,QAAL,GAAgB,OAAhB;MACA,KAAI,CAAC,OAAL,GAAe,MAAf;IACD,CAHc,CAAf;EAID;;EAED,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,UAAJ,EAAY;SAAZ,YAAA;MACE,OAAO,KAAK,SAAZ;IACD,CAFW;qBAAA;;EAAA,CAAZ;EAIA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,YAAA;MACE,OAAO,KAAK,MAAZ;IACD,CAFQ;qBAAA;;EAAA,CAAT;;EAIA,MAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,KAAR,EAAgB;IACd,KAAK,SAAL,GAAiB,IAAjB;IACA,KAAK,MAAL,GAAc,IAAd;;IACA,KAAK,QAAL,CAAc,KAAd;EACD,CAJD;;EAMA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,KAAP,EAAiB;IACf,KAAK,SAAL,GAAiB,IAAjB;IACA,KAAK,MAAL,GAAc,KAAd;;IACA,KAAK,OAAL,CAAa,KAAb;EACD,CAJD;;EAMA,MAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;IACE,OAAO,KAAK,OAAZ;EACD,CAFD;;EAIA,MAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;IACE,OAAO,KAAK,OAAZ;EACD,CAFD;;EAGF,OAAA,MAAA;AAAC,CAzCD,EAAA;;AAAa,OAAA,CAAA,MAAA,GAAA,MAAA;;AA2Cb,SAAgB,QAAhB,CAA4B,CAA5B,EAAyC;EACvC,IAAM,MAAM,GAAG,IAAI,MAAJ,EAAf;EACA,OAAO,YAAY,CAAC,CAAD,EAAI,MAAJ,CAAnB;AACD;;AAHD,OAAA,CAAA,QAAA,GAAA,QAAA;;AAKA,SAAgB,YAAhB,CAAgC,CAAhC,EAA+C,MAA/C,EAAgE;EAC9D,CAAC,CAAC,IAAF,CAAO,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,MAApB,CAAP,EAAoC,KAApC,CAA0C,MAAM,CAAC,MAAP,CAAc,IAAd,CAAmB,MAAnB,CAA1C;EACA,OAAO,MAAP;AACD;;AAHD,OAAA,CAAA,YAAA,GAAA,YAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pipeToFuture = exports.toFuture = exports.Future = void 0;\n// A Future is like an exernally fulfillable (resolvable) promise\nvar Future = /** @class */ (function () {\n    function Future() {\n        var _this = this;\n        this._finished = false;\n        this._error = null;\n        this.promise = new Promise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n    Object.defineProperty(Future.prototype, \"finished\", {\n        get: function () {\n            return this._finished;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Future.prototype, \"error\", {\n        get: function () {\n            return this._error;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Future.prototype.resolve = function (value) {\n        this._finished = true;\n        this._error = null;\n        this._resolve(value);\n    };\n    Future.prototype.reject = function (error) {\n        this._finished = true;\n        this._error = error;\n        this._reject(error);\n    };\n    Future.prototype.wait = function () {\n        return this.promise;\n    };\n    Future.prototype.asPromise = function () {\n        return this.promise;\n    };\n    return Future;\n}());\nexports.Future = Future;\nfunction toFuture(p) {\n    var future = new Future();\n    return pipeToFuture(p, future);\n}\nexports.toFuture = toFuture;\nfunction pipeToFuture(p, future) {\n    p.then(future.resolve.bind(future)).catch(future.reject.bind(future));\n    return future;\n}\nexports.pipeToFuture = pipeToFuture;\n//# sourceMappingURL=future.js.map"]},"metadata":{},"sourceType":"script"}