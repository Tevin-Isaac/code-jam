{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidFeeCurrency = exports.clearPreviousConfig = exports.loadPreviousConfig = void 0;\n\nvar contractkit_1 = require(\"@celo/contractkit\");\n\nvar connectors_1 = require(\"../connectors\");\n\nvar constants_1 = require(\"../constants\");\n\nvar localStorage_1 = __importDefault(require(\"./localStorage\"));\n\nvar loadPreviousConfig = function (defaultNetworkProp, defaultFeeCurrencyProp) {\n  var _a;\n\n  var lastUsedNetworkName = defaultNetworkProp.name;\n  var lastUsedAddress = null;\n  var lastUsedWalletType = constants_1.WalletTypes.Unauthenticated;\n  var lastUsedWalletArguments = [];\n  var lastUsedFeeCurrency = defaultFeeCurrencyProp;\n\n  if (typeof localStorage_1.default !== 'undefined') {\n    var localLastUsedNetworkName = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedNetwork);\n\n    if (localLastUsedNetworkName) {\n      lastUsedNetworkName = localLastUsedNetworkName;\n    }\n\n    lastUsedAddress = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedAddress);\n    var localLastUsedWalletType = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedWalletType);\n\n    if (localLastUsedWalletType && localLastUsedWalletType in constants_1.WalletTypes) {\n      lastUsedWalletType = localLastUsedWalletType;\n    }\n\n    var localLastUsedWalletArguments = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedWalletArguments);\n\n    if (localLastUsedWalletArguments) {\n      try {\n        lastUsedWalletArguments = JSON.parse(localLastUsedWalletArguments);\n      } catch (e) {\n        lastUsedWalletArguments = [];\n      }\n    }\n\n    var localLastUsedFeeCurrency = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedFeeCurrency);\n\n    if (isValidFeeCurrency(localLastUsedFeeCurrency)) {\n      lastUsedFeeCurrency = localLastUsedFeeCurrency;\n    }\n  }\n\n  var lastUsedNetwork = constants_1.DEFAULT_NETWORKS.find(function (n) {\n    return n.name === lastUsedNetworkName;\n  });\n  var initialConnector;\n\n  if (lastUsedWalletType && lastUsedNetwork) {\n    try {\n      initialConnector = new ((_a = connectors_1.CONNECTOR_TYPES[lastUsedWalletType]).bind.apply(_a, __spreadArray([void 0, lastUsedNetwork, lastUsedFeeCurrency], __read(lastUsedWalletArguments), false)))();\n    } catch (e) {\n      initialConnector = new connectors_1.UnauthenticatedConnector(lastUsedNetwork || defaultNetworkProp);\n    }\n  } else {\n    initialConnector = new connectors_1.UnauthenticatedConnector(lastUsedNetwork || defaultNetworkProp);\n  }\n\n  return {\n    address: lastUsedAddress,\n    network: lastUsedNetwork || null,\n    connector: initialConnector,\n    feeCurrency: lastUsedFeeCurrency\n  };\n};\n\nexports.loadPreviousConfig = loadPreviousConfig;\n\nfunction clearPreviousConfig() {\n  Object.values(constants_1.localStorageKeys).forEach(function (val) {\n    return localStorage_1.default.removeItem(val);\n  });\n}\n\nexports.clearPreviousConfig = clearPreviousConfig;\n\nfunction isValidFeeCurrency(currency) {\n  switch (currency) {\n    case contractkit_1.CeloContract.GoldToken:\n    case contractkit_1.CeloContract.StableToken:\n    case contractkit_1.CeloContract.StableTokenEUR:\n    case contractkit_1.CeloContract.StableTokenBRL:\n      return true;\n\n    default:\n      return false;\n  }\n}\n\nexports.isValidFeeCurrency = isValidFeeCurrency;","map":{"version":3,"sources":["../../src/utils/helpers.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValidFeeCurrency = exports.clearPreviousConfig = exports.loadPreviousConfig = void 0;\nvar contractkit_1 = require(\"@celo/contractkit\");\nvar connectors_1 = require(\"../connectors\");\nvar constants_1 = require(\"../constants\");\nvar localStorage_1 = __importDefault(require(\"./localStorage\"));\nvar loadPreviousConfig = function (defaultNetworkProp, defaultFeeCurrencyProp) {\n    var _a;\n    var lastUsedNetworkName = defaultNetworkProp.name;\n    var lastUsedAddress = null;\n    var lastUsedWalletType = constants_1.WalletTypes.Unauthenticated;\n    var lastUsedWalletArguments = [];\n    var lastUsedFeeCurrency = defaultFeeCurrencyProp;\n    if (typeof localStorage_1.default !== 'undefined') {\n        var localLastUsedNetworkName = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedNetwork);\n        if (localLastUsedNetworkName) {\n            lastUsedNetworkName = localLastUsedNetworkName;\n        }\n        lastUsedAddress = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedAddress);\n        var localLastUsedWalletType = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedWalletType);\n        if (localLastUsedWalletType && localLastUsedWalletType in constants_1.WalletTypes) {\n            lastUsedWalletType = localLastUsedWalletType;\n        }\n        var localLastUsedWalletArguments = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedWalletArguments);\n        if (localLastUsedWalletArguments) {\n            try {\n                lastUsedWalletArguments = JSON.parse(localLastUsedWalletArguments);\n            }\n            catch (e) {\n                lastUsedWalletArguments = [];\n            }\n        }\n        var localLastUsedFeeCurrency = localStorage_1.default.getItem(constants_1.localStorageKeys.lastUsedFeeCurrency);\n        if (isValidFeeCurrency(localLastUsedFeeCurrency)) {\n            lastUsedFeeCurrency = localLastUsedFeeCurrency;\n        }\n    }\n    var lastUsedNetwork = constants_1.DEFAULT_NETWORKS.find(function (n) { return n.name === lastUsedNetworkName; });\n    var initialConnector;\n    if (lastUsedWalletType && lastUsedNetwork) {\n        try {\n            initialConnector = new ((_a = connectors_1.CONNECTOR_TYPES[lastUsedWalletType]).bind.apply(_a, __spreadArray([void 0, lastUsedNetwork,\n                lastUsedFeeCurrency], __read(lastUsedWalletArguments), false)))();\n        }\n        catch (e) {\n            initialConnector = new connectors_1.UnauthenticatedConnector(lastUsedNetwork || defaultNetworkProp);\n        }\n    }\n    else {\n        initialConnector = new connectors_1.UnauthenticatedConnector(lastUsedNetwork || defaultNetworkProp);\n    }\n    return {\n        address: lastUsedAddress,\n        network: lastUsedNetwork || null,\n        connector: initialConnector,\n        feeCurrency: lastUsedFeeCurrency,\n    };\n};\nexports.loadPreviousConfig = loadPreviousConfig;\nfunction clearPreviousConfig() {\n    Object.values(constants_1.localStorageKeys).forEach(function (val) {\n        return localStorage_1.default.removeItem(val);\n    });\n}\nexports.clearPreviousConfig = clearPreviousConfig;\nfunction isValidFeeCurrency(currency) {\n    switch (currency) {\n        case contractkit_1.CeloContract.GoldToken:\n        case contractkit_1.CeloContract.StableToken:\n        case contractkit_1.CeloContract.StableTokenEUR:\n        case contractkit_1.CeloContract.StableTokenBRL:\n            return true;\n        default:\n            return false;\n    }\n}\nexports.isValidFeeCurrency = isValidFeeCurrency;\n//# sourceMappingURL=helpers.js.map"]},"metadata":{},"sourceType":"script"}